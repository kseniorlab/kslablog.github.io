---
date: '2022-06-09'
title: '한국시니어연구소 브랜치 전략'
categories: ['GitHub', 'Branch']
headimage: './branch_main.jpg'
summary: '서비스의 규모가 커진만큼 개발자도 늘고 협업량도 늘었습니다. 이에 맞게 새롭게 정한 한국시니어연구소의 브랜치 전략을 소개합니다.'
thumbnail: './branch_thumb.jpg'
author: ['박재용', '안녕하세요. 한국시니어연구소 테크본부 프론트엔드 개발자 박재용입니다.', '사용자들의 사용성 개선을 위한 ux 중심의 개발을 위해 늘 고민하고 있습니다.', 'jyp@kslab.co.kr', 'github.com/super-mangomango']
profile: './jyp.jpg'
---

### 안녕하세요😀

한국시니어연구소 테크본부 프론트 엔드 개발자 박재용입니다. <br>
테크본부에는 PM, QA, 디자이너, 개발자들이 소속되어있는데요, 사실 테크본부가 만들어지기 전에는 프로덕트팀이라고 했었습니다. 기존 한국시니어연구소 프로덕트팀은 프로덕트 당 담당 개발자들이 0.5~1명 정도로, 각자 맡은 부분을 각자 테스트하고 배포하는 방식으로 업무를 진행해왔습니다. 하지만 어느새 회사의 규모가 커지고, 이에 따라 서비스의 규모 또한 커지고 많은 변화가 생겼습니다. 프로덕트팀은 테크본부로 새롭게 개편이 되었습니다. 사무실 빈 자리가 하나씩 채워지고👍 다수의 개발자분들과 협업을 하게 되었고, 이에 맞게 개발 프로세스도 변한 환경에 맞게 새롭게 확립이 되었습니다. 
<br>
<br>
그리고 그 프로세스 중 하나가 이번에 소개해드릴 **브랜치 전략**입니다.

---
<br>

## Git 브랜치 전략

다수의 개발자들이 하나의 프로덕트에 각기 다른 기능 개선/버그 수정 등의 작업을 하면서 협업을 하게 된다면, 배포까지의 과정까지 혼란이 생기지 않도록 하는 규칙이 필요합니다. 한국시니어연구소는 Github으로 형상관리를 하므로, **Git 브랜치 전략**으로 이 규칙을 정하였습니다. 

`GitHub Flow` , `Git Flow`  등이 대표적인 Git 브랜치 전략으로 많이 사용되고 있습니다. 한국시니어연구소에서는 과거 `GitHub Flow` 에 가까운 브랜치 전략을 사용했지만, 많은 개발자들이 협업을 하게 되면서 `Git Flow` 를 우리에 맞게 변형 시킨 방법으로 브랜치 전략을 사용하고 있습니다.

---
<br>


## 브랜치 생성

Git Flow를 활용하기 앞서, 브랜치 관리를 효율적으로 하기 위하여 새로운 브랜치 생성을 하는 경우에도 몇 가지 규칙을 정하고 있습니다.

<br>

**이슈생성**

> 한국시니어연구소는 이슈 관리 툴로 [JIRA](https://www.atlassian.com/software/jira)를 사용하고 있습니다. 기획 및 디자인 단계에서 기능개선 / 버그에 대한 기획문서와 리소스를 JIRA 티켓에 담아 생성하게 되면, 그때부터 우리 개발자들의 업무가 본격적으로 시작됩니다 ⏰
> 

<br>

1. 생성된 이슈에 대한 작업을 시작할 때는 반드시 **새로운 브랜치**를 생성하고 작업을 시작합니다.
- 새로운 브랜치를 생성하지 않으면 협업자와 코드가 꼬일 확률이 매우 높아지고 작업이 순조롭게 진행되지 않습니다.

<br>

2. 반드시 **이슈 1개당 브랜치 1**개를 생성합니다.
- 한번에 여러 이슈를 작업하는 게 조금 더 빠를 수도 있지만 머지 시점이 밀렸을 때나, 버그가 났을 경우 선택적으로 브랜치 별 머지를 할 수 있어서 결과적으로 훨씬 시간을 아낄 수 있습니다.
- 해당 브랜치에 대한 코드리뷰 과정에서 예상치 못한 작업이 있을 경우, 리뷰어가 혼란스러울 수 있습니다.

<br>

3. 브랜치를 새로 만들 때는 {브랜치 타입명} / {지라 이슈 번호}의 규칙으로 생성합니다.
- ex - `bug/HBUG-47` , `feat/MPRO-122`

---
<br>
<br>

## 한국시니어연구소의 Git Flow
<br>

![](https://imagedelivery.net/jfIRjXneURbVKR0daxEchg/d0c30835-bbb2-4d53-8b3f-b47752620d00/public)

<br>

### 브랜치 별 용도

<br>

1. master
- 가장 원본의 소스코드가 있는 브랜치 입니다. master 브랜치의 소스가 실서버로 업로드 됩니다.

<br>

2. staging
- QA를 위한 브랜치 입니다. 개발팀 내부를 벗어나는 최초의 브랜치이며, 커뮤니케이션을 위해 verioning을 합니다. 발급된 버전은 master에 그대로 적용됩니다.

<br>

3. dev
- 개발버전의 브랜치 입니다. Bug, Feature 등의 브랜치에서 작업한 내용들의 PR을 받아 머지하며, 개발서버로 업로드 됩니다. hotfix를 제외한 이슈가 생길때, dev 브랜치에서 새로운 브랜치를 만들게 됩니다.

<br>

4. feat
- 신규기능 개발을 위한 브랜치 입니다. 개발이 끝나면 코드리뷰 후 dev 브랜치로 머지합니다.

<br>

5. bug
- 버그수정을 위한 브랜치 입니다. 개발이 끝나면 코드리뷰 후 dev 브랜치로 머지 합니다.

<br>

6. docs / devops
- 문서(주석 등) 혹은 travis-ci, github action, code deploy등 devOps를 위한 설정을 바꾸기 위한 브랜치이며 배포가 되지 않도록 관리합니다.

<br>

7. hotfix
- 핫픽스를 위한 브랜치입니다. 실서버에서 중요한 버그가 발생 했을 때, 마스터에서 바로 브랜치를 생성해서 바로 master로 머지합니다. 추가적으로 해당 내용을 개발버전에도 반영을 해야되기 때문에 dev브랜치로도 코드를 병합시켜줍니다. 이때 Pull request / merge가 아닌 dev에서 master(or hotfix branch)를 바로 pull 하시면 됩니다.  push기준으로 versioniong을 합니다.

<br>
<br>

### PR과 코드리뷰

feat / bug 등의 브랜치에서 작업이 끝난 후 dev 브랜치로 Pull Request를 요청하게 되면, 팀원들 간의 코드리뷰를 진행하게 됩니다. 한국시니어연구소의 코드리뷰의 궁극적인 목표는 브랜치 전략을 사용하는 것과 마찬가지로 협업에 있습니다. 

미래의 유지보수에 있어 적합한 코드인지 / 더 나은 방법이 있는지 등을 자유롭게 논의하고 각자의 지식과 노하우를 공유합니다. 이런 코드리뷰 과정을 거쳐서, 리뷰어들의 approve를 받게 된다면, dev 브랜치로의 merge가 진행됩니다.

---
<br>

## After

Git Flow 도입 후의 과정이 마냥 매끄럽지만은 않았습니다. 혼자 작업하던게 익숙했던 저도 프로세스는 복잡하게 느껴졌고, reviewer / reviewee가 되는 것도 어색했습니다.
<br>
여러 시행착오와 적응기간을 지나, 과거에 급하게 처리했던 이슈들, 코드리뷰 과정없이 나홀로 머지한 코드들로 인한 기술부채들을 하나씩 처리하고, 브랜치들을 체계적으로 정리하기 시작하면서 확실히 협업은 편해지고, 단단한 프로세스 과정을 갖추게 되었습니다.
<br>
물론 프로세스가 늘 우리가 만든 Git Flow대로 진행되지는 않습니다. 일정 상의 문제, 버그 등으로 인해 생략되는 과정이 생기거나 이런 것들로 인해 후에 재작업을 해야 되는 경우도 생기게 마련입니다. 하지만  결국은 우리가 만들어놓은 단단한 규칙들과 프로세스가 언젠가는 어려운 상황들도 제자리로 돌려놓을 수 있게 도움을 줄 것이라고 생각합니다.
<br>
이 포스팅이, 협업에 익숙치 않은 분들이나, 새롭게 git 브랜치 전략을 만드시는 분들에게 좋은 예가 되어, 모두에게 딱 맞는 브랜치 전략을 만들 수 있길 바랍니다. 👋